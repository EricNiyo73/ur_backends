{"version":3,"file":"verifyEmail.js","names":["_nodemailer","_interopRequireDefault","require","_userModel","_express","obj","__esModule","default","router","express","Router","get","req","res","token","query","user","User","findOne","emailToken","isVerified","save","console","log","err","_default","exports"],"sources":["../../../src/helpers/verifyEmail.js"],"sourcesContent":["import nodemailer from \"nodemailer\";\r\nimport User from \"../model/userModel.js\";\r\nimport express from \"express\";\r\nconst router = express.Router();\r\nrouter.get(\"/verify-email\", async (req, res) => {\r\n  try {\r\n    const token = req.query.token;\r\n    const user = await User.findOne({ emailToken: token });\r\n    if (user) {\r\n      user.emailToken = null;\r\n      user.isVerified = true;\r\n      await user.save();\r\n      console.log(\"verified\");\r\n    } else {\r\n      console.log(\"email is not verified\");\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n});\r\nexport default router;\r\n"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,UAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,QAAA,GAAAH,sBAAA,CAAAC,OAAA;AAA8B,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAC9B,MAAMG,MAAM,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAC/BF,MAAM,CAACG,GAAG,CAAC,eAAe,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC9C,IAAI;IACF,MAAMC,KAAK,GAAGF,GAAG,CAACG,KAAK,CAACD,KAAK;IAC7B,MAAME,IAAI,GAAG,MAAMC,kBAAI,CAACC,OAAO,CAAC;MAAEC,UAAU,EAAEL;IAAM,CAAC,CAAC;IACtD,IAAIE,IAAI,EAAE;MACRA,IAAI,CAACG,UAAU,GAAG,IAAI;MACtBH,IAAI,CAACI,UAAU,GAAG,IAAI;MACtB,MAAMJ,IAAI,CAACK,IAAI,EAAE;MACjBC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;IACzB,CAAC,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;IACtC;EACF,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZF,OAAO,CAACC,GAAG,CAACC,GAAG,CAAC;EAClB;AACF,CAAC,CAAC;AAAC,IAAAC,QAAA,GACYjB,MAAM;AAAAkB,OAAA,CAAAnB,OAAA,GAAAkB,QAAA"}