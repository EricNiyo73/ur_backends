{"version":3,"file":"subscribeController.js","names":["_express","_interopRequireDefault","require","_bodyParser","_subscribers","obj","__esModule","default","router","Router","createSubscribe","req","res","next","checksub","subscribers","findOne","email","body","emailRegex","test","status","json","message","newsubscribe","name","subscri","save","error","console","log","exports","findAll","suscribe","find","data","err","unsubscribe","subs","findById","params","id","delete"],"sources":["../../../src/Controller/subscribeController.js"],"sourcesContent":["import express from \"express\";\nimport  Router  from 'express';\nconst router = Router();\nimport bodyParser from 'body-parser';\nimport subscribers from \"../model/subscribers\";\n\nexport const createSubscribe = async (req, res, next) => {\n\n    try{\n        const checksub = await subscribers.findOne({ email: req.body.email });\n        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n    if (!emailRegex.test(req.body.email)) {\n      return res.status(400).json({\n        message: \"Invalid email format\",\n      });\n    }\n\n    if (checksub){\n        return res.status(400).json({\n            message: \"Email already subscribed to this Site\"\n          });\n    } else{\n        const newsubscribe = new subscribers({\n            name: req.body.name,\n            email: req.body.email,\n        });\n        const subscri = await newsubscribe.save();\n        return res.status(200).json({\n            subscri,\n            status: \"Subscribe added successfully\"\n          });\n        }\n        } catch (error) {\n            console.log(\"Error: \", error);\n            return  res.status(500).json(error)\n          }\n          \n}\n\n// =========================get All subscribers =================\nexport const findAll = async (req, res) => {\n  try{\n  const suscribe = await subscribers.find();\n    \n    return res.status(200).json({\n      data: suscribe\n    });\n  } catch (err) {\n    return res.status(500).json(err);\n  }\n};\n\n// =================================unsbscribe================================\n\n\nexport const unsubscribe = async (req, res) => {\n  try {\n    const subs = await subscribers.findById(req.params.id);\n      try {\n        await subs.delete();\n        return res.status(200).json(\"you have successfully unsubscribed\");\n      } catch (err) {\n        return  res.status(500).json(err);\n      }\n  } catch (err) {\n    return res.status(500).json(err);\n  }\n};"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AAGA,IAAAC,WAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AAA+C,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAF/C,MAAMG,MAAM,GAAG,IAAAC,gBAAM,GAAE;AAIhB,MAAMC,eAAe,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAErD,IAAG;IACC,MAAMC,QAAQ,GAAG,MAAMC,oBAAW,CAACC,OAAO,CAAC;MAAEC,KAAK,EAAEN,GAAG,CAACO,IAAI,CAACD;IAAM,CAAC,CAAC;IACrE,MAAME,UAAU,GAAG,kDAAkD;IACzE,IAAI,CAACA,UAAU,CAACC,IAAI,CAACT,GAAG,CAACO,IAAI,CAACD,KAAK,CAAC,EAAE;MACpC,OAAOL,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAC1BC,OAAO,EAAE;MACX,CAAC,CAAC;IACJ;IAEA,IAAIT,QAAQ,EAAC;MACT,OAAOF,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QACxBC,OAAO,EAAE;MACX,CAAC,CAAC;IACR,CAAC,MAAK;MACF,MAAMC,YAAY,GAAG,IAAIT,oBAAW,CAAC;QACjCU,IAAI,EAAEd,GAAG,CAACO,IAAI,CAACO,IAAI;QACnBR,KAAK,EAAEN,GAAG,CAACO,IAAI,CAACD;MACpB,CAAC,CAAC;MACF,MAAMS,OAAO,GAAG,MAAMF,YAAY,CAACG,IAAI,EAAE;MACzC,OAAOf,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QACxBI,OAAO;QACPL,MAAM,EAAE;MACV,CAAC,CAAC;IACJ;EACA,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,KAAK,CAAC;IAC7B,OAAQhB,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACM,KAAK,CAAC;EACrC;AAEV,CAAC;;AAED;AAAAG,OAAA,CAAArB,eAAA,GAAAA,eAAA;AACO,MAAMsB,OAAO,GAAG,MAAAA,CAAOrB,GAAG,EAAEC,GAAG,KAAK;EACzC,IAAG;IACH,MAAMqB,QAAQ,GAAG,MAAMlB,oBAAW,CAACmB,IAAI,EAAE;IAEvC,OAAOtB,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAC1Ba,IAAI,EAAEF;IACR,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOG,GAAG,EAAE;IACZ,OAAOxB,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACc,GAAG,CAAC;EAClC;AACF,CAAC;;AAED;AAAAL,OAAA,CAAAC,OAAA,GAAAA,OAAA;AAGO,MAAMK,WAAW,GAAG,MAAAA,CAAO1B,GAAG,EAAEC,GAAG,KAAK;EAC7C,IAAI;IACF,MAAM0B,IAAI,GAAG,MAAMvB,oBAAW,CAACwB,QAAQ,CAAC5B,GAAG,CAAC6B,MAAM,CAACC,EAAE,CAAC;IACpD,IAAI;MACF,MAAMH,IAAI,CAACI,MAAM,EAAE;MACnB,OAAO9B,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,oCAAoC,CAAC;IACnE,CAAC,CAAC,OAAOc,GAAG,EAAE;MACZ,OAAQxB,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACc,GAAG,CAAC;IACnC;EACJ,CAAC,CAAC,OAAOA,GAAG,EAAE;IACZ,OAAOxB,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACc,GAAG,CAAC;EAClC;AACF,CAAC;AAACL,OAAA,CAAAM,WAAA,GAAAA,WAAA"}